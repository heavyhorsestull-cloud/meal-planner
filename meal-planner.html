<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meal Planner - ä¸€é€±é–“ã®çŒ®ç«‹ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&display=swap');
:root {
  --bg: #f6f7fb; --card: #fff; --primary: #4f46e5; --primary-light: #e0e7ff;
  --accent: #f59e0b; --success: #10b981; --success-light: #d1fae5;
  --danger: #ef4444; --danger-light: #fee2e2;
  --text: #1e293b; --text-secondary: #64748b; --text-muted: #94a3b8;
  --border: #e2e8f0; --border-light: #f1f5f9;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
  --shadow-xl: 0 20px 50px -12px rgba(0,0,0,0.1);
  --radius: 16px; --radius-sm: 10px; --radius-xs: 6px;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Inter','Noto Sans JP',-apple-system,BlinkMacSystemFont,sans-serif; background:var(--bg); color:var(--text); min-height:100vh; -webkit-font-smoothing:antialiased; }

.hero { background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 50%,#a855f7 100%); padding:48px 24px 56px; text-align:center; position:relative; overflow:hidden; }
.hero::before { content:''; position:absolute; inset:0; background:radial-gradient(circle at 20% 80%,rgba(255,255,255,.15) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(255,255,255,.1) 0%,transparent 50%); }
.hero-content { position:relative; z-index:1; }
.hero h1 { font-size:2rem; font-weight:800; color:#fff; letter-spacing:-.02em; margin-bottom:6px; }
.hero p { font-size:.9rem; color:rgba(255,255,255,.8); }

.settings-panel { max-width:880px; margin:-32px auto 0; padding:0 16px; position:relative; z-index:2; }
.settings-card { background:var(--card); border-radius:var(--radius); padding:28px; box-shadow:var(--shadow-xl); border:1px solid var(--border-light); }
.settings-row { display:flex; gap:16px; flex-wrap:wrap; margin-bottom:20px; }
.setting-group { flex:1; min-width:160px; }
.setting-label { font-size:.7rem; font-weight:700; text-transform:uppercase; letter-spacing:.08em; color:var(--text-muted); margin-bottom:8px; }
.toggle-group { display:flex; border-radius:var(--radius-sm); overflow:hidden; border:1.5px solid var(--border); background:var(--bg); }
.toggle-btn { flex:1; padding:10px 14px; border:none; cursor:pointer; font-size:.82rem; font-weight:600; background:transparent; color:var(--text-secondary); transition:all .25s cubic-bezier(.4,0,.2,1); white-space:nowrap; font-family:inherit; }
.toggle-btn.active { background:var(--primary); color:#fff; box-shadow:0 2px 8px rgba(79,70,229,.3); }
.toggle-btn:hover:not(.active) { background:var(--primary-light); color:var(--primary); }

/* People selector */
.people-selector { display:flex; align-items:center; gap:0; border-radius:var(--radius-sm); border:1.5px solid var(--border); background:var(--bg); overflow:hidden; }
.people-btn { width:42px; height:42px; border:none; cursor:pointer; font-size:1.1rem; font-weight:700; background:transparent; color:var(--primary); transition:all .15s; font-family:inherit; display:flex; align-items:center; justify-content:center; }
.people-btn:hover { background:var(--primary-light); }
.people-btn:active { background:var(--primary); color:#fff; }
.people-display { flex:1; text-align:center; font-size:.95rem; font-weight:700; color:var(--text); min-width:60px; user-select:none; }
.people-display span { font-size:.7rem; font-weight:500; color:var(--text-muted); }

.allergy-section { margin-bottom:20px; }
.allergy-grid { display:flex; flex-wrap:wrap; gap:8px; }
.allergy-chip { display:flex; align-items:center; gap:6px; padding:7px 14px; border-radius:50px; border:1.5px solid var(--border); background:var(--card); cursor:pointer; font-size:.8rem; font-weight:500; color:var(--text-secondary); transition:all .2s; user-select:none; font-family:inherit; }
.allergy-chip:hover { border-color:var(--danger); color:var(--danger); background:var(--danger-light); }
.allergy-chip.selected { border-color:var(--danger); background:var(--danger); color:#fff; }
.allergy-chip .icon { font-size:1rem; line-height:1; }
.allergy-chip .x-mark { display:none; font-size:.7rem; font-weight:800; margin-left:2px; }
.allergy-chip.selected .x-mark { display:inline; }
.allergy-warning { display:none; margin-top:10px; padding:10px 14px; border-radius:var(--radius-xs); background:var(--danger-light); border:1px solid #fca5a5; font-size:.78rem; color:#b91c1c; font-weight:500; }
.allergy-warning.show { display:flex; align-items:center; gap:8px; }

.generate-row { display:flex; justify-content:center; }
.btn-generate { padding:14px 48px; border:none; border-radius:50px; background:linear-gradient(135deg,var(--primary),#7c3aed); color:#fff; font-size:1rem; font-weight:700; cursor:pointer; box-shadow:0 4px 15px rgba(79,70,229,.35); transition:all .25s cubic-bezier(.4,0,.2,1); letter-spacing:.02em; font-family:inherit; }
.btn-generate:hover { transform:translateY(-2px); box-shadow:0 8px 25px rgba(79,70,229,.45); }
.btn-generate:active { transform:translateY(0); }

.main { max-width:880px; margin:0 auto; padding:0 16px 60px; }

.summary-bar { display:none; grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); gap:12px; margin-top:28px; }
.summary-bar.show { display:grid; }
.stat-card { background:var(--card); border-radius:var(--radius-sm); padding:18px 14px; text-align:center; box-shadow:var(--shadow-sm); border:1px solid var(--border-light); transition:transform .2s; }
.stat-card:hover { transform:translateY(-2px); }
.stat-num { font-size:1.6rem; font-weight:800; background:linear-gradient(135deg,var(--primary),#7c3aed); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.stat-label { font-size:.68rem; color:var(--text-muted); font-weight:600; margin-top:2px; }

.section-header { display:flex; align-items:center; gap:10px; margin:28px 0 14px; }
.section-header .icon { width:32px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:1rem; }
.section-header h2 { font-size:1.1rem; font-weight:700; letter-spacing:-.01em; }
.section-header .badge { margin-left:auto; font-size:.7rem; font-weight:600; padding:4px 12px; border-radius:50px; background:var(--primary-light); color:var(--primary); }

.day-card { background:var(--card); border-radius:var(--radius); margin-bottom:10px; box-shadow:var(--shadow-sm); border:1px solid var(--border-light); overflow:hidden; transition:all .25s; }
.day-card:hover { box-shadow:var(--shadow-md); }
.day-header { padding:14px 20px; display:flex; align-items:center; gap:12px; cursor:pointer; user-select:none; transition:background .15s; }
.day-header:hover { background:var(--bg); }
.day-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
.day-name { font-weight:700; font-size:.92rem; }
.day-cal-badge { margin-left:auto; font-size:.72rem; font-weight:600; color:var(--text-muted); padding:3px 10px; background:var(--bg); border-radius:50px; }
.day-arrow { font-size:.65rem; color:var(--text-muted); transition:transform .3s cubic-bezier(.4,0,.2,1); }
.day-header.open .day-arrow { transform:rotate(180deg); }
.day-body { padding:0 20px 16px; }
.day-body.collapsed { display:none; }
.meal-row { display:flex; align-items:center; gap:10px; padding:10px 0; border-bottom:1px solid var(--border-light); }
.meal-row:last-child { border-bottom:none; }
.meal-badge { font-size:.65rem; font-weight:700; color:#fff; padding:3px 10px; border-radius:50px; flex-shrink:0; letter-spacing:.04em; }
.meal-badge.breakfast { background:linear-gradient(135deg,#f59e0b,#f97316); }
.meal-badge.lunch { background:linear-gradient(135deg,#3b82f6,#6366f1); }
.meal-badge.dinner { background:linear-gradient(135deg,#ec4899,#ef4444); }
.cuisine-pill { font-size:.6rem; font-weight:700; padding:2px 8px; border-radius:50px; flex-shrink:0; }
.cuisine-pill.jp { background:#fef2f2; color:#dc2626; }
.cuisine-pill.western { background:#eff6ff; color:#2563eb; }
.cuisine-pill.cn { background:#fff7ed; color:#ea580c; }
.meal-name { font-weight:600; font-size:.85rem; flex:1; min-width:0; }
.meal-cal { font-size:.72rem; color:var(--text-muted); font-weight:500; white-space:nowrap; flex-shrink:0; }
.day-total { text-align:right; font-size:.75rem; font-weight:700; color:var(--primary); padding-top:6px; }

/* â”€â”€ Shopping list table â”€â”€ */
.ing-card { background:var(--card); border-radius:var(--radius); padding:24px; box-shadow:var(--shadow-sm); border:1px solid var(--border-light); }
.ing-summary { font-size:.78rem; color:var(--text-muted); margin-bottom:16px; font-weight:500; }
.ing-cat-title { font-size:.78rem; font-weight:700; color:var(--text-secondary); margin:18px 0 8px; padding-bottom:6px; border-bottom:2px solid var(--border-light); display:flex; align-items:center; gap:6px; }
.ing-cat-title:first-of-type { margin-top:0; }
.ing-cat-title .cnt { font-size:.65rem; background:var(--primary-light); color:var(--primary); padding:1px 7px; border-radius:50px; font-weight:700; }

.ing-table { width:100%; border-collapse:collapse; margin-bottom:4px; }
.ing-table tr { transition:all .15s; cursor:pointer; user-select:none; }
.ing-table tr:hover { background:var(--primary-light); }
.ing-table tr.checked td { color:#94a3b8; text-decoration:line-through; }
.ing-table tr.checked { background:var(--success-light); }
.ing-table td { padding:7px 8px; font-size:.82rem; border-bottom:1px solid var(--border-light); }
.ing-table td:first-child { font-weight:600; width:40%; }
.ing-table td:nth-child(2) { text-align:right; font-weight:700; color:var(--primary); white-space:nowrap; width:30%; }
.ing-table td:nth-child(3) { color:var(--text-muted); font-size:.75rem; width:30%; }
.ing-table .check-icon { display:inline-block; width:18px; height:18px; border:2px solid var(--border); border-radius:4px; vertical-align:middle; margin-right:8px; position:relative; flex-shrink:0; transition:all .15s; }
.ing-table tr.checked .check-icon { background:var(--success); border-color:var(--success); }
.ing-table tr.checked .check-icon::after { content:''; position:absolute; left:4px; top:1px; width:5px; height:9px; border:solid #fff; border-width:0 2px 2px 0; transform:rotate(45deg); }
.td-name { display:flex; align-items:center; }

@keyframes fadeInUp { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
.animate-in { animation:fadeInUp .35s cubic-bezier(.4,0,.2,1) both; }

@media(max-width:600px){
  .hero{padding:36px 16px 48px} .hero h1{font-size:1.5rem}
  .settings-card{padding:20px} .settings-row{flex-direction:column;gap:14px}
  .meal-name{font-size:.78rem} .btn-generate{width:100%}
  .summary-bar{grid-template-columns:repeat(2,1fr)}
  .ing-table td:nth-child(3){display:none}
}
</style>
</head>
<body>

<div class="hero">
  <div class="hero-content">
    <h1>Meal Planner</h1>
    <p>ä¸€é€±é–“ã®çŒ®ç«‹ã‚’å’Œæ´‹ä¸­ãƒãƒ©ãƒ³ã‚¹ã‚ˆãã€ã‚ãªãŸã«åˆã‚ã›ã¦ææ¡ˆã—ã¾ã™</p>
  </div>
</div>

<div class="settings-panel">
  <div class="settings-card">
    <div class="settings-row">
      <div class="setting-group">
        <div class="setting-label">ã‚«ãƒ­ãƒªãƒ¼è¨­å®š</div>
        <div class="toggle-group" id="calToggle">
          <button class="toggle-btn active" data-val="diet">ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ</button>
          <button class="toggle-btn" data-val="normal">é€šå¸¸</button>
        </div>
      </div>
      <div class="setting-group">
        <div class="setting-label">äºˆç®—</div>
        <div class="toggle-group" id="budgetToggle">
          <button class="toggle-btn active" data-val="saving">ç¯€ç´„</button>
          <button class="toggle-btn" data-val="normal">é€šå¸¸</button>
          <button class="toggle-btn" data-val="rich">ãƒªãƒƒãƒ</button>
        </div>
      </div>
      <div class="setting-group">
        <div class="setting-label">äººæ•°</div>
        <div class="people-selector">
          <button class="people-btn" onclick="changePeople(-1)">&#8722;</button>
          <div class="people-display" id="peopleDisplay">2<span> äººå‰</span></div>
          <button class="people-btn" onclick="changePeople(1)">&#43;</button>
        </div>
      </div>
    </div>

    <div class="allergy-section">
      <div class="setting-label">ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼é™¤å¤–ï¼ˆè©²å½“ã™ã‚‹ã‚‚ã®ã‚’é¸æŠï¼‰</div>
      <div class="allergy-grid" id="allergyGrid"></div>
      <div class="allergy-warning" id="allergyWarning">
        <span>&#9888;</span>
        <span id="allergyWarningText"></span>
      </div>
    </div>

    <div class="generate-row">
      <button class="btn-generate" id="generateBtn">çŒ®ç«‹ã‚’ä½œæˆã™ã‚‹</button>
    </div>
  </div>
</div>

<div class="main">
  <div class="summary-bar" id="summaryBar"></div>
  <div id="weekPlan"></div>
  <div id="ingredients"></div>
</div>

<script>
// â”€â”€ Helper: ingredient shorthand â”€â”€
// i('name', qty, 'unit') â†’ { n, q, u }
function i(n, q, u) { return { n, q, u }; }

let peopleCount = 2;
function changePeople(d) {
  peopleCount = Math.max(1, Math.min(10, peopleCount + d));
  document.getElementById('peopleDisplay').innerHTML = peopleCount + '<span> äººå‰</span>';
  if (currentPlan) renderIngredients();
}

const ALLERGENS = [
  { id:'egg',      label:'åµ',     icon:'ğŸ¥š', ingredients:['åµ','ã†ãšã‚‰ã®åµ'] },
  { id:'milk',     label:'ä¹³è£½å“', icon:'ğŸ¥›', ingredients:['ç‰›ä¹³','ãƒã‚¿ãƒ¼','ãƒãƒ¼ã‚º','ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º','ã‚®ãƒªã‚·ãƒ£ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ','ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ','ç”Ÿã‚¯ãƒªãƒ¼ãƒ ','ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ãƒãƒ¼ã‚º'] },
  { id:'wheat',    label:'å°éº¦',   icon:'ğŸŒ¾', ingredients:['å°éº¦ç²‰','ãƒ‘ãƒ³ç²‰','é£Ÿãƒ‘ãƒ³','å…¨ç²’ç²‰ãƒ‘ãƒ³','ã‚¤ãƒ³ã‚°ãƒªãƒƒã‚·ãƒ¥ãƒãƒ•ã‚£ãƒ³','è’¸ã—ãƒ‘ãƒ³','æšã’ãƒ‘ãƒ³','ä¸­è¯éºº','ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£','ã†ã©ã‚“','å¤©ã·ã‚‰ç²‰','ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­ãƒŸãƒƒã‚¯ã‚¹','å…¨ç²’ç²‰ã‚¯ãƒ«ãƒˆãƒ³','ãƒ‡ãƒŸã‚°ãƒ©ã‚¹ã‚½ãƒ¼ã‚¹'] },
  { id:'shrimp',   label:'ã‚¨ãƒ“',   icon:'ğŸ¦', ingredients:['ã‚¨ãƒ“','å¹²ã—ã‚¨ãƒ“'] },
  { id:'crab',     label:'ã‚«ãƒ‹',   icon:'ğŸ¦€', ingredients:['ã‚«ãƒ‹'] },
  { id:'soba',     label:'ãã°',   icon:'ğŸœ', ingredients:['ãã°'] },
  { id:'peanut',   label:'è½èŠ±ç”Ÿ', icon:'ğŸ¥œ', ingredients:['ãƒ”ãƒ¼ãƒŠãƒƒãƒ„','è½èŠ±ç”Ÿ'] },
  { id:'soy',      label:'å¤§è±†',   icon:'ğŸ«˜', ingredients:['è±†è…','ç´è±†','è±†ä¹³','å‘³å™Œ','é†¤æ²¹','è±†æ¿é†¤','ç”œéººé†¤','ç„¼ãè±†è…','ã‚ªã‚¤ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹'] },
  { id:'fish',     label:'é­šé¡',   icon:'ğŸŸ', ingredients:['é®­','ã‚µãƒ¼ãƒ¢ãƒ³','ã‚¿ãƒ©','ã•ã°','ã•ã°ç¼¶','ã¶ã‚Š','ã—ã‚‰ã™','ã‹ã¤ãŠç¯€','ã‚ã‚“ã¤ã‚†'] },
  { id:'squid',    label:'ã‚¤ã‚«',   icon:'ğŸ¦‘', ingredients:['ã‚¤ã‚«'] },
  { id:'shellfish',label:'è²é¡',   icon:'ğŸš', ingredients:['ã‚ã•ã‚Š','ãƒ›ã‚¿ãƒ†'] },
  { id:'sesame',   label:'ã”ã¾',   icon:'ğŸ«™', ingredients:['ã”ã¾','ã”ã¾æ²¹','ç·´ã‚Šã”ã¾','ãƒ©ãƒ¼æ²¹'] },
];

const DAYS = ['æœˆæ›œæ—¥','ç«æ›œæ—¥','æ°´æ›œæ—¥','æœ¨æ›œæ—¥','é‡‘æ›œæ—¥','åœŸæ›œæ—¥','æ—¥æ›œæ—¥'];
const DAY_COLORS = ['#4f46e5','#7c3aed','#ec4899','#f59e0b','#10b981','#3b82f6','#ef4444'];

// â”€â”€ Meal database with quantities (per 1 person) â”€â”€
const DB = {
  diet: {
    breakfast: [
      { name:'ã‚ªãƒ¼ãƒˆãƒŸãƒ¼ãƒ«ç²¥ï¼ˆæ¢…å¹²ã—ãƒ»ã—ã‚‰ã™ï¼‰', cuisine:'jp', cal:250, cost:'low',
        ing:[i('ã‚ªãƒ¼ãƒˆãƒŸãƒ¼ãƒ«',40,'g'),i('æ¢…å¹²ã—',1,'å€‹'),i('ã—ã‚‰ã™',15,'g'),i('ã®ã‚Š',1,'æš')] },
      { name:'è±†è…ã¨ã‚ã‹ã‚ã®å‘³å™Œæ±ï¼‹ç„ç±³ãŠã«ãã‚Š', cuisine:'jp', cal:280, cost:'low',
        ing:[i('è±†è…',150,'g'),i('ã‚ã‹ã‚',3,'g'),i('å‘³å™Œ',18,'g'),i('ç„ç±³',150,'g')] },
      { name:'ã‚¢ãƒœã‚«ãƒ‰ãƒˆãƒ¼ã‚¹ãƒˆï¼‹ã‚†ã§åµ', cuisine:'western', cal:300, cost:'mid',
        ing:[i('å…¨ç²’ç²‰ãƒ‘ãƒ³',1,'æš'),i('ã‚¢ãƒœã‚«ãƒ‰',0.5,'å€‹'),i('åµ',1,'å€‹'),i('ãƒ¬ãƒ¢ãƒ³',0.25,'å€‹')] },
      { name:'ã‚®ãƒªã‚·ãƒ£ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆï¼‹ã‚°ãƒ©ãƒãƒ¼ãƒ©', cuisine:'western', cal:260, cost:'mid',
        ing:[i('ã‚®ãƒªã‚·ãƒ£ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ',150,'g'),i('ã‚°ãƒ©ãƒãƒ¼ãƒ©',40,'g'),i('ãƒŸãƒƒã‚¯ã‚¹ãƒ™ãƒªãƒ¼',30,'g')] },
      { name:'ä¸­è¯é¢¨è±†ä¹³ã‚¹ãƒ¼ãƒ—ï¼‹è’¸ã—ãƒ‘ãƒ³', cuisine:'cn', cal:240, cost:'low',
        ing:[i('è±†ä¹³',200,'ml'),i('é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ',5,'g'),i('å°æ¾èœ',50,'g'),i('è’¸ã—ãƒ‘ãƒ³',1,'å€‹')] },
      { name:'ç´è±†ã”ã¯ã‚“ï¼‹å…·ã ãã•ã‚“å‘³å™Œæ±', cuisine:'jp', cal:290, cost:'low',
        ing:[i('ç´è±†',1,'ãƒ‘ãƒƒã‚¯'),i('ã”ã¯ã‚“',150,'g'),i('å¤§æ ¹',40,'g'),i('ã«ã‚“ã˜ã‚“',30,'g'),i('å‘³å™Œ',18,'g')] },
      { name:'ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼ãƒœã‚¦ãƒ«', cuisine:'western', cal:230, cost:'low',
        ing:[i('ãƒãƒŠãƒŠ',1,'æœ¬'),i('ã»ã†ã‚Œã‚“è‰',30,'g'),i('è±†ä¹³',150,'ml'),i('ã‚°ãƒ©ãƒãƒ¼ãƒ©',30,'g')] },
      { name:'æ¸©æ³‰åµã®ã›é›‘ç‚Š', cuisine:'jp', cal:260, cost:'low',
        ing:[i('ã”ã¯ã‚“',150,'g'),i('åµ',1,'å€‹'),i('é•·ã­ã',20,'g'),i('é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ',5,'g'),i('ã®ã‚Š',1,'æš')] },
      { name:'ãƒˆãƒãƒˆã¨ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ã®ãƒ–ãƒ«ã‚¹ã‚±ãƒƒã‚¿', cuisine:'western', cal:280, cost:'high',
        ing:[i('å…¨ç²’ç²‰ãƒ‘ãƒ³',1,'æš'),i('ãƒˆãƒãƒˆ',0.5,'å€‹'),i('ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ãƒãƒ¼ã‚º',50,'g'),i('ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«',8,'ml'),i('ãƒã‚¸ãƒ«',2,'æš')] },
      { name:'ä¸­è¯é¢¨è’¸ã—é‡èœãƒ—ãƒ¬ãƒ¼ãƒˆ', cuisine:'cn', cal:220, cost:'low',
        ing:[i('ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼',60,'g'),i('ã«ã‚“ã˜ã‚“',40,'g'),i('ã‚‚ã‚„ã—',50,'g'),i('ãƒãƒ³é…¢',15,'ml'),i('ã”ã¾æ²¹',5,'ml')] },
    ],
    lunch: [
      { name:'é¶ã‚€ã­è‚‰ã®ã‚µãƒ©ãƒ€ãƒã‚­ãƒ³ä¸¼', cuisine:'jp', cal:380, cost:'low',
        ing:[i('é¶ã‚€ã­è‚‰',120,'g'),i('ãƒ¬ã‚¿ã‚¹',40,'g'),i('ãƒˆãƒãƒˆ',0.5,'å€‹'),i('ã”ã¯ã‚“',150,'g'),i('ãƒãƒ³é…¢',15,'ml')] },
      { name:'ã•ã•ã¿ã¨é‡èœã®ä¸­è¯æ˜¥é›¨ã‚µãƒ©ãƒ€', cuisine:'cn', cal:320, cost:'low',
        ing:[i('ã•ã•ã¿',80,'g'),i('æ˜¥é›¨',30,'g'),i('ãã‚…ã†ã‚Š',0.5,'æœ¬'),i('ã«ã‚“ã˜ã‚“',30,'g'),i('ã”ã¾æ²¹',5,'ml'),i('é…¢',10,'ml')] },
      { name:'ã‚°ãƒªãƒ«ãƒã‚­ãƒ³ã®ã‚·ãƒ¼ã‚¶ãƒ¼ã‚µãƒ©ãƒ€', cuisine:'western', cal:350, cost:'mid',
        ing:[i('é¶ã‚€ã­è‚‰',120,'g'),i('ãƒ­ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¿ã‚¹',60,'g'),i('ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º',15,'g'),i('å…¨ç²’ç²‰ã‚¯ãƒ«ãƒˆãƒ³',20,'g')] },
      { name:'è’¸ã—é¶ã®å†·ã‚„ã—ä¸­è¯é¢¨', cuisine:'cn', cal:360, cost:'low',
        ing:[i('é¶ã‚€ã­è‚‰',100,'g'),i('ä¸­è¯éºº',1,'ç‰'),i('ãã‚…ã†ã‚Š',0.5,'æœ¬'),i('åµ',1,'å€‹'),i('ãƒˆãƒãƒˆ',0.5,'å€‹'),i('ã”ã¾',5,'g')] },
      { name:'ã‚µãƒ¼ãƒ¢ãƒ³ãƒã‚±ä¸¼', cuisine:'western', cal:400, cost:'high',
        ing:[i('ã‚µãƒ¼ãƒ¢ãƒ³',80,'g'),i('ã‚¢ãƒœã‚«ãƒ‰',0.5,'å€‹'),i('ç„ç±³',150,'g'),i('é†¤æ²¹',10,'ml'),i('ã”ã¾',3,'g')] },
      { name:'è±šã—ã‚ƒã¶ã‚µãƒ©ãƒ€ã†ã©ã‚“', cuisine:'jp', cal:370, cost:'mid',
        ing:[i('è±šã‚‚ã‚‚è‚‰',80,'g'),i('ã†ã©ã‚“',1,'ç‰'),i('ãƒ¬ã‚¿ã‚¹',40,'g'),i('ãƒˆãƒãƒˆ',0.5,'å€‹'),i('ãƒãƒ³é…¢',20,'ml')] },
      { name:'ã‚¨ãƒ“ã¨è±†è…ã®ä¸­è¯ã‚ã‚“ã‹ã‘', cuisine:'cn', cal:340, cost:'mid',
        ing:[i('ã‚¨ãƒ“',80,'g'),i('è±†è…',150,'g'),i('ãƒãƒ³ã‚²ãƒ³èœ',80,'g'),i('ç”Ÿå§œ',5,'g'),i('é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ',5,'g')] },
      { name:'é¯–ç¼¶ã¨å¤§è‘‰ã®æ··ãœã”ã¯ã‚“', cuisine:'jp', cal:350, cost:'low',
        ing:[i('ã•ã°ç¼¶',0.5,'ç¼¶'),i('å¤§è‘‰',3,'æš'),i('ã”ã¯ã‚“',150,'g'),i('ç”Ÿå§œ',5,'g'),i('ã”ã¾',3,'g'),i('é†¤æ²¹',8,'ml')] },
      { name:'ãƒã‚­ãƒ³ã¨ã‚­ãƒŒã‚¢ã®ãƒ‘ãƒ¯ãƒ¼ã‚µãƒ©ãƒ€', cuisine:'western', cal:380, cost:'high',
        ing:[i('é¶ã‚€ã­è‚‰',100,'g'),i('ã‚­ãƒŒã‚¢',40,'g'),i('ãƒŸãƒ‹ãƒˆãƒãƒˆ',5,'å€‹'),i('ãã‚…ã†ã‚Š',0.5,'æœ¬'),i('ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«',10,'ml'),i('ãƒ¬ãƒ¢ãƒ³',0.25,'å€‹')] },
      { name:'ã‚‚ã‚„ã—ãŸã£ã·ã‚Šå¡©ç„¼ããã°', cuisine:'cn', cal:330, cost:'low',
        ing:[i('ä¸­è¯éºº',1,'ç‰'),i('ã‚‚ã‚„ã—',100,'g'),i('ã‚­ãƒ£ãƒ™ãƒ„',60,'g'),i('è±šã‚‚ã‚‚è‚‰',60,'g'),i('å¡©',2,'g'),i('ã”ã¾æ²¹',5,'ml')] },
    ],
    dinner: [
      { name:'é®­ã®ãƒ›ã‚¤ãƒ«ç„¼ãï¼‹ãã®ã“æ·»ãˆ', cuisine:'jp', cal:350, cost:'mid',
        ing:[i('é®­',1,'åˆ‡ã‚Œ'),i('ã—ã‚ã˜',50,'g'),i('ãˆã®ã',50,'g'),i('ç‰ã­ã',0.25,'å€‹'),i('ãƒã‚¿ãƒ¼',8,'g'),i('ãƒãƒ³é…¢',15,'ml')] },
      { name:'é¶ã‚€ã­è‚‰ã®ãƒˆãƒãƒˆç…®è¾¼ã¿', cuisine:'western', cal:380, cost:'mid',
        ing:[i('é¶ã‚€ã­è‚‰',130,'g'),i('ãƒˆãƒãƒˆç¼¶',0.5,'ç¼¶'),i('ç‰ã­ã',0.5,'å€‹'),i('ã‚ºãƒƒã‚­ãƒ¼ãƒ‹',0.5,'æœ¬'),i('ã«ã‚“ã«ã',1,'ç‰‡'),i('ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«',8,'ml')] },
      { name:'éº»å©†è±†è…ï¼ˆãƒ˜ãƒ«ã‚·ãƒ¼ç‰ˆï¼‰', cuisine:'cn', cal:330, cost:'low',
        ing:[i('è±†è…',200,'g'),i('é¶ã²ãè‚‰',80,'g'),i('é•·ã­ã',0.5,'æœ¬'),i('è±†æ¿é†¤',5,'g'),i('ã«ã‚“ã«ã',1,'ç‰‡'),i('ç”Ÿå§œ',5,'g')] },
      { name:'ã‚¿ãƒ©ã®ã‚¢ã‚¯ã‚¢ãƒ‘ãƒƒãƒ„ã‚¡', cuisine:'western', cal:300, cost:'high',
        ing:[i('ã‚¿ãƒ©',1,'åˆ‡ã‚Œ'),i('ãƒŸãƒ‹ãƒˆãƒãƒˆ',6,'å€‹'),i('ã‚ã•ã‚Š',80,'g'),i('ã‚ªãƒªãƒ¼ãƒ–',5,'ç²’'),i('ã‚±ãƒƒãƒ‘ãƒ¼',5,'g'),i('ç™½ãƒ¯ã‚¤ãƒ³',30,'ml')] },
      { name:'è‚‰è±†è…', cuisine:'jp', cal:360, cost:'mid',
        ing:[i('ç‰›ã‚‚ã‚‚è‚‰',100,'g'),i('è±†è…',200,'g'),i('ç™½èœ',80,'g'),i('é•·ã­ã',0.5,'æœ¬'),i('ã—ã‚‰ãŸã',80,'g'),i('é†¤æ²¹',15,'ml'),i('ã¿ã‚Šã‚“',15,'ml')] },
      { name:'æµ·é®®å…«å®èœ', cuisine:'cn', cal:320, cost:'mid',
        ing:[i('ã‚¨ãƒ“',60,'g'),i('ã‚¤ã‚«',60,'g'),i('ç™½èœ',80,'g'),i('ã«ã‚“ã˜ã‚“',30,'g'),i('ããã‚‰ã’',5,'g'),i('ã†ãšã‚‰ã®åµ',3,'å€‹'),i('ã‚ªã‚¤ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹',12,'ml')] },
      { name:'ã¶ã‚Šã®ç…§ã‚Šç„¼ãï¼‹ãŠæµ¸ã—', cuisine:'jp', cal:370, cost:'mid',
        ing:[i('ã¶ã‚Š',1,'åˆ‡ã‚Œ'),i('é†¤æ²¹',15,'ml'),i('ã¿ã‚Šã‚“',15,'ml'),i('ã»ã†ã‚Œã‚“è‰',80,'g'),i('ã‹ã¤ãŠç¯€',3,'g')] },
      { name:'é¶ã•ã•ã¿ã®ãƒ¬ãƒ¢ãƒ³ãƒãƒ¼ãƒ–ã‚°ãƒªãƒ«', cuisine:'western', cal:310, cost:'mid',
        ing:[i('ã•ã•ã¿',120,'g'),i('ãƒ¬ãƒ¢ãƒ³',0.5,'å€‹'),i('ãƒ­ãƒ¼ã‚ºãƒãƒªãƒ¼',1,'æ'),i('ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼',80,'g'),i('ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«',8,'ml')] },
      { name:'è±†è…ãƒãƒ£ãƒ³ãƒ—ãƒ«ãƒ¼', cuisine:'jp', cal:320, cost:'low',
        ing:[i('è±†è…',200,'g'),i('ã‚‚ã‚„ã—',100,'g'),i('ã«ã‚‰',50,'g'),i('åµ',1,'å€‹'),i('ã”ã¾æ²¹',8,'ml'),i('ã‹ã¤ãŠç¯€',3,'g')] },
      { name:'è’¸ã—é¶ã®è‘±ã‚½ãƒ¼ã‚¹ãŒã‘', cuisine:'cn', cal:300, cost:'low',
        ing:[i('é¶ã‚€ã­è‚‰',130,'g'),i('é•·ã­ã',1,'æœ¬'),i('ç”Ÿå§œ',10,'g'),i('ã”ã¾æ²¹',10,'ml'),i('é†¤æ²¹',10,'ml')] },
    ]
  },
  normal: {
    breakfast: [
      { name:'ç„¼ãé®­å®šé£Ÿ', cuisine:'jp', cal:450, cost:'mid',
        ing:[i('é®­',1,'åˆ‡ã‚Œ'),i('ã”ã¯ã‚“',200,'g'),i('å‘³å™Œ',18,'g'),i('è±†è…',80,'g'),i('ãŸãã‚ã‚“',20,'g')] },
      { name:'ãƒ•ãƒ¬ãƒ³ãƒãƒˆãƒ¼ã‚¹ãƒˆï¼‹ãƒ™ãƒ¼ã‚³ãƒ³', cuisine:'western', cal:480, cost:'mid',
        ing:[i('é£Ÿãƒ‘ãƒ³',2,'æš'),i('åµ',1,'å€‹'),i('ç‰›ä¹³',80,'ml'),i('ãƒã‚¿ãƒ¼',10,'g'),i('ãƒ™ãƒ¼ã‚³ãƒ³',2,'æš'),i('ãƒ¡ãƒ¼ãƒ—ãƒ«ã‚·ãƒ­ãƒƒãƒ—',15,'ml')] },
      { name:'ä¸­è¯ç²¥ï¼‹æ²¹æ¡é¢¨æšã’ãƒ‘ãƒ³', cuisine:'cn', cal:420, cost:'low',
        ing:[i('ã”ã¯ã‚“',150,'g'),i('é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ',5,'g'),i('ç”Ÿå§œ',5,'g'),i('ã‚¶ãƒ¼ã‚µã‚¤',15,'g'),i('ãƒ‘ã‚¯ãƒãƒ¼',5,'g'),i('æšã’ãƒ‘ãƒ³',1,'æœ¬')] },
      { name:'ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ï¼‹ãƒ•ãƒ«ãƒ¼ãƒ„', cuisine:'western', cal:500, cost:'mid',
        ing:[i('ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­ãƒŸãƒƒã‚¯ã‚¹',80,'g'),i('åµ',1,'å€‹'),i('ç‰›ä¹³',60,'ml'),i('ãƒãƒŠãƒŠ',1,'æœ¬'),i('ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ',20,'g')] },
      { name:'è±šæ±å®šé£Ÿ', cuisine:'jp', cal:470, cost:'low',
        ing:[i('è±šãƒãƒ©è‚‰',60,'g'),i('å¤§æ ¹',50,'g'),i('ã«ã‚“ã˜ã‚“',30,'g'),i('ã”ã¼ã†',30,'g'),i('ã“ã‚“ã«ã‚ƒã',40,'g'),i('å‘³å™Œ',18,'g'),i('ã”ã¯ã‚“',200,'g')] },
      { name:'ã‚¨ãƒƒã‚°ãƒ™ãƒãƒ‡ã‚£ã‚¯ãƒˆ', cuisine:'western', cal:520, cost:'high',
        ing:[i('ã‚¤ãƒ³ã‚°ãƒªãƒƒã‚·ãƒ¥ãƒãƒ•ã‚£ãƒ³',1,'å€‹'),i('åµ',2,'å€‹'),i('ãƒãƒ ',2,'æš'),i('ãƒã‚¿ãƒ¼',15,'g'),i('ãƒ¬ãƒ¢ãƒ³',0.25,'å€‹')] },
      { name:'è‚‰ã¾ã‚“ï¼‹è±†ä¹³', cuisine:'cn', cal:400, cost:'low',
        ing:[i('è‚‰ã¾ã‚“',2,'å€‹'),i('è±†ä¹³',200,'ml'),i('ã‚¶ãƒ¼ã‚µã‚¤',10,'g')] },
      { name:'ã ã—å·»ãåµå®šé£Ÿ', cuisine:'jp', cal:430, cost:'low',
        ing:[i('åµ',3,'å€‹'),i('ã”ã¯ã‚“',200,'g'),i('å‘³å™Œ',18,'g'),i('ã‚ã‹ã‚',3,'g'),i('å¤§æ ¹',40,'g')] },
      { name:'ã‚¯ãƒ­ãƒƒã‚¯ãƒ ãƒƒã‚·ãƒ¥', cuisine:'western', cal:490, cost:'mid',
        ing:[i('é£Ÿãƒ‘ãƒ³',2,'æš'),i('ãƒãƒ ',2,'æš'),i('ãƒãƒ¼ã‚º',30,'g'),i('ç‰›ä¹³',30,'ml'),i('ãƒã‚¿ãƒ¼',10,'g')] },
      { name:'å°æ¹¾é¢¨è±†ä¹³ã‚¹ãƒ¼ãƒ—ï¼ˆé¹¹è±†æ¼¿ï¼‰', cuisine:'cn', cal:380, cost:'low',
        ing:[i('è±†ä¹³',250,'ml'),i('é…¢',10,'ml'),i('ã‚¶ãƒ¼ã‚µã‚¤',10,'g'),i('å¹²ã—ã‚¨ãƒ“',5,'g'),i('ã”ã¾æ²¹',5,'ml'),i('é•·ã­ã',15,'g')] },
    ],
    lunch: [
      { name:'ã‚«ãƒ„ä¸¼', cuisine:'jp', cal:700, cost:'mid',
        ing:[i('è±šãƒ­ãƒ¼ã‚¹',120,'g'),i('åµ',2,'å€‹'),i('ç‰ã­ã',0.5,'å€‹'),i('ã”ã¯ã‚“',250,'g'),i('ãƒ‘ãƒ³ç²‰',20,'g'),i('é†¤æ²¹',15,'ml'),i('ã¿ã‚Šã‚“',15,'ml')] },
      { name:'ãƒŠãƒãƒªã‚¿ãƒ³', cuisine:'western', cal:650, cost:'low',
        ing:[i('ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£',100,'g'),i('ã‚¦ã‚¤ãƒ³ãƒŠãƒ¼',3,'æœ¬'),i('ç‰ã­ã',0.5,'å€‹'),i('ãƒ”ãƒ¼ãƒãƒ³',1,'å€‹'),i('ã‚±ãƒãƒ£ãƒƒãƒ—',30,'g'),i('ãƒã‚¿ãƒ¼',10,'g')] },
      { name:'å›é‹è‚‰å®šé£Ÿ', cuisine:'cn', cal:680, cost:'low',
        ing:[i('è±šãƒãƒ©è‚‰',100,'g'),i('ã‚­ãƒ£ãƒ™ãƒ„',100,'g'),i('ãƒ”ãƒ¼ãƒãƒ³',2,'å€‹'),i('ç”œéººé†¤',10,'g'),i('è±†æ¿é†¤',5,'g'),i('ã”ã¯ã‚“',200,'g')] },
      { name:'ãƒãƒ³ãƒãƒ¼ã‚°ãƒ©ãƒ³ãƒ', cuisine:'western', cal:720, cost:'mid',
        ing:[i('åˆã„ã³ãè‚‰',150,'g'),i('ç‰ã­ã',0.5,'å€‹'),i('ãƒ‘ãƒ³ç²‰',15,'g'),i('åµ',0.5,'å€‹'),i('ãƒ‡ãƒŸã‚°ãƒ©ã‚¹ã‚½ãƒ¼ã‚¹',50,'g'),i('ã˜ã‚ƒãŒã„ã‚‚',1,'å€‹')] },
      { name:'å¤©ã·ã‚‰ã†ã©ã‚“', cuisine:'jp', cal:600, cost:'mid',
        ing:[i('ã†ã©ã‚“',1,'ç‰'),i('ã‚¨ãƒ“',3,'å°¾'),i('ã•ã¤ã¾ã„ã‚‚',50,'g'),i('å¤§è‘‰',2,'æš'),i('å¤©ã·ã‚‰ç²‰',30,'g'),i('ã‚ã‚“ã¤ã‚†',50,'ml')] },
      { name:'æ‹…ã€…éºº', cuisine:'cn', cal:680, cost:'mid',
        ing:[i('ä¸­è¯éºº',1,'ç‰'),i('è±šã²ãè‚‰',80,'g'),i('ãƒãƒ³ã‚²ãƒ³èœ',60,'g'),i('ç·´ã‚Šã”ã¾',15,'g'),i('è±†æ¿é†¤',5,'g'),i('ãƒ©ãƒ¼æ²¹',5,'ml')] },
      { name:'ã‚¿ã‚³ãƒ©ã‚¤ã‚¹', cuisine:'western', cal:650, cost:'mid',
        ing:[i('åˆã„ã³ãè‚‰',120,'g'),i('ãƒ¬ã‚¿ã‚¹',40,'g'),i('ãƒˆãƒãƒˆ',0.5,'å€‹'),i('ãƒãƒ¼ã‚º',30,'g'),i('ã”ã¯ã‚“',200,'g'),i('ã‚µãƒ«ã‚µã‚½ãƒ¼ã‚¹',30,'g')] },
      { name:'è¦ªå­ä¸¼', cuisine:'jp', cal:620, cost:'low',
        ing:[i('é¶ã‚‚ã‚‚è‚‰',120,'g'),i('åµ',2,'å€‹'),i('ç‰ã­ã',0.5,'å€‹'),i('ã”ã¯ã‚“',250,'g'),i('é†¤æ²¹',15,'ml'),i('ã¿ã‚Šã‚“',15,'ml')] },
      { name:'ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©', cuisine:'western', cal:700, cost:'high',
        ing:[i('ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£',100,'g'),i('ãƒ™ãƒ¼ã‚³ãƒ³',40,'g'),i('åµ',1,'å€‹'),i('ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º',20,'g'),i('ç”Ÿã‚¯ãƒªãƒ¼ãƒ ',50,'ml')] },
      { name:'éº»å©†ä¸¼', cuisine:'cn', cal:660, cost:'low',
        ing:[i('è±†è…',200,'g'),i('è±šã²ãè‚‰',80,'g'),i('é•·ã­ã',0.5,'æœ¬'),i('è±†æ¿é†¤',5,'g'),i('ç”œéººé†¤',10,'g'),i('ã”ã¯ã‚“',200,'g')] },
    ],
    dinner: [
      { name:'ã™ãç„¼ã', cuisine:'jp', cal:650, cost:'high',
        ing:[i('ç‰›è‚©ãƒ­ãƒ¼ã‚¹',150,'g'),i('ç™½èœ',100,'g'),i('é•·ã­ã',0.5,'æœ¬'),i('ã—ã‚‰ãŸã',80,'g'),i('ç„¼ãè±†è…',100,'g'),i('æ˜¥èŠ',40,'g'),i('åµ',1,'å€‹'),i('ç ‚ç³–',10,'g'),i('é†¤æ²¹',20,'ml'),i('ã¿ã‚Šã‚“',20,'ml')] },
      { name:'ãƒã‚­ãƒ³ã®ã‚¯ãƒªãƒ¼ãƒ ã‚·ãƒãƒ¥ãƒ¼', cuisine:'western', cal:580, cost:'mid',
        ing:[i('é¶ã‚‚ã‚‚è‚‰',120,'g'),i('ã˜ã‚ƒãŒã„ã‚‚',1,'å€‹'),i('ã«ã‚“ã˜ã‚“',0.5,'æœ¬'),i('ç‰ã­ã',0.5,'å€‹'),i('ç‰›ä¹³',150,'ml'),i('ãƒã‚¿ãƒ¼',12,'g'),i('å°éº¦ç²‰',10,'g')] },
      { name:'é…¢è±š', cuisine:'cn', cal:620, cost:'mid',
        ing:[i('è±šè‚©ãƒ­ãƒ¼ã‚¹',120,'g'),i('ç‰ã­ã',0.5,'å€‹'),i('ãƒ”ãƒ¼ãƒãƒ³',2,'å€‹'),i('ã«ã‚“ã˜ã‚“',0.3,'æœ¬'),i('ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«',30,'g'),i('é…¢',20,'ml'),i('ã‚±ãƒãƒ£ãƒƒãƒ—',20,'g')] },
      { name:'ãƒ“ãƒ¼ãƒ•ã‚·ãƒãƒ¥ãƒ¼', cuisine:'western', cal:680, cost:'high',
        ing:[i('ç‰›ã™ã­è‚‰',150,'g'),i('ã˜ã‚ƒãŒã„ã‚‚',1,'å€‹'),i('ã«ã‚“ã˜ã‚“',0.5,'æœ¬'),i('ç‰ã­ã',0.5,'å€‹'),i('ãƒˆãƒãƒˆç¼¶',0.3,'ç¼¶'),i('èµ¤ãƒ¯ã‚¤ãƒ³',30,'ml'),i('ãƒ‡ãƒŸã‚°ãƒ©ã‚¹ã‚½ãƒ¼ã‚¹',50,'g')] },
      { name:'ã‚¨ãƒ“ãƒãƒªï¼‹ä¸­è¯ã‚¹ãƒ¼ãƒ—', cuisine:'cn', cal:550, cost:'mid',
        ing:[i('ã‚¨ãƒ“',120,'g'),i('é•·ã­ã',0.5,'æœ¬'),i('ã«ã‚“ã«ã',1,'ç‰‡'),i('ç”Ÿå§œ',5,'g'),i('è±†æ¿é†¤',5,'g'),i('ã‚±ãƒãƒ£ãƒƒãƒ—',15,'g'),i('åµ',1,'å€‹'),i('ã‚ã‹ã‚',3,'g')] },
      { name:'ã•ã°ã®å‘³å™Œç…®ï¼‹ç­‘å‰ç…®', cuisine:'jp', cal:520, cost:'low',
        ing:[i('ã•ã°',1,'åˆ‡ã‚Œ'),i('å‘³å™Œ',20,'g'),i('ç”Ÿå§œ',10,'g'),i('é¶ã‚‚ã‚‚è‚‰',80,'g'),i('ã‚Œã‚“ã“ã‚“',50,'g'),i('ã«ã‚“ã˜ã‚“',0.3,'æœ¬'),i('ã”ã¼ã†',30,'g'),i('ã“ã‚“ã«ã‚ƒã',40,'g'),i('é†¤æ²¹',15,'ml')] },
      { name:'ãƒ­ãƒ¼ã‚¹ãƒˆãƒãƒ¼ã‚¯ï¼‹æ¸©é‡èœ', cuisine:'western', cal:600, cost:'mid',
        ing:[i('è±šè‚©ãƒ­ãƒ¼ã‚¹',150,'g'),i('ã«ã‚“ã«ã',1,'ç‰‡'),i('ãƒ­ãƒ¼ã‚ºãƒãƒªãƒ¼',1,'æ'),i('ã˜ã‚ƒãŒã„ã‚‚',1,'å€‹'),i('ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼',60,'g'),i('ã«ã‚“ã˜ã‚“',0.5,'æœ¬')] },
      { name:'ç”Ÿå§œç„¼ãå®šé£Ÿ', cuisine:'jp', cal:600, cost:'low',
        ing:[i('è±šãƒ­ãƒ¼ã‚¹',120,'g'),i('ç”Ÿå§œ',10,'g'),i('ç‰ã­ã',0.5,'å€‹'),i('ã‚­ãƒ£ãƒ™ãƒ„',60,'g'),i('ã”ã¯ã‚“',200,'g'),i('é†¤æ²¹',15,'ml'),i('ã¿ã‚Šã‚“',15,'ml')] },
      { name:'ãƒãƒ¼ã‚ºãƒªã‚¾ãƒƒãƒˆ', cuisine:'western', cal:620, cost:'high',
        ing:[i('ã”ã¯ã‚“',200,'g'),i('ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º',30,'g'),i('ç‰ã­ã',0.5,'å€‹'),i('ãƒã‚¿ãƒ¼',15,'g'),i('ç™½ãƒ¯ã‚¤ãƒ³',30,'ml'),i('é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ',5,'g')] },
      { name:'é’æ¤’è‚‰çµ²', cuisine:'cn', cal:560, cost:'mid',
        ing:[i('ç‰›ã‚‚ã‚‚è‚‰',120,'g'),i('ãƒ”ãƒ¼ãƒãƒ³',3,'å€‹'),i('ãŸã‘ã®ã“',50,'g'),i('é†¤æ²¹',12,'ml'),i('ã‚ªã‚¤ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹',10,'ml'),i('ã”ã¾æ²¹',8,'ml')] },
    ]
  }
};

// â”€â”€ State â”€â”€
let selectedAllergens = new Set();
let currentPlan = null;

function renderAllergyChips() {
  document.getElementById('allergyGrid').innerHTML = ALLERGENS.map(a => `
    <button class="allergy-chip" data-id="${a.id}" onclick="toggleAllergen('${a.id}')">
      <span class="icon">${a.icon}</span><span>${a.label}</span><span class="x-mark">&times;</span>
    </button>`).join('');
}

function toggleAllergen(id) {
  if (selectedAllergens.has(id)) selectedAllergens.delete(id); else selectedAllergens.add(id);
  document.querySelectorAll('.allergy-chip').forEach(c => c.classList.toggle('selected', selectedAllergens.has(c.dataset.id)));
  updateAllergyWarning();
}

function updateAllergyWarning() {
  const w = document.getElementById('allergyWarning'), t = document.getElementById('allergyWarningText');
  if (selectedAllergens.size > 0) {
    t.textContent = [...selectedAllergens].map(id => ALLERGENS.find(a=>a.id===id).label).join('ãƒ»') + ' ã‚’å«ã‚€ãƒ¬ã‚·ãƒ”ã¯é™¤å¤–ã•ã‚Œã¾ã™';
    w.classList.add('show');
  } else w.classList.remove('show');
}

function getBannedIngredients() {
  const b = new Set();
  selectedAllergens.forEach(id => ALLERGENS.find(x=>x.id===id).ingredients.forEach(n=>b.add(n)));
  return b;
}

function setupToggle(id) {
  document.getElementById(id).addEventListener('click', e => {
    const btn = e.target.closest('.toggle-btn'); if(!btn) return;
    btn.parentElement.querySelectorAll('.toggle-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
  });
}
setupToggle('calToggle'); setupToggle('budgetToggle');
function getCalMode() { return document.querySelector('#calToggle .toggle-btn.active').dataset.val; }
function getBudgetMode() { return document.querySelector('#budgetToggle .toggle-btn.active').dataset.val; }

function shuffle(arr) {
  const a=[...arr]; for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a;
}

function filterMeals(pool) {
  const banned=getBannedIngredients(), budget=getBudgetMode();
  return pool.filter(m => {
    if (m.ing.some(x => banned.has(x.n))) return false;
    if (budget==='saving' && m.cost==='high') return false;
    if (budget==='rich' && m.cost==='low') return false;
    return true;
  });
}

function pickMeals(pool, count) {
  const filtered=filterMeals(pool);
  if(!filtered.length) return [];
  const shuffled=shuffle(filtered), picked=[], cc={jp:0,western:0,cn:0}, mx=Math.ceil(count/3)+1;
  for(const m of shuffled){if(picked.length>=count)break;if(cc[m.cuisine]<mx){picked.push(m);cc[m.cuisine]++;}}
  let idx=0;while(picked.length<count&&shuffled.length>0){picked.push(shuffled[idx%shuffled.length]);idx++;}
  return picked;
}

function generate() {
  const pool=DB[getCalMode()];
  const b=pickMeals(pool.breakfast,7), l=pickMeals(pool.lunch,7), d=pickMeals(pool.dinner,7);
  if(b.length<7||l.length<7||d.length<7){alert('é¸æŠã—ãŸæ¡ä»¶ã§ã¯ãƒ¬ã‚·ãƒ”ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\nã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„äºˆç®—ã®è¨­å®šã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚');return;}
  currentPlan=DAYS.map((day,idx)=>({day,color:DAY_COLORS[idx],meals:[
    {type:'breakfast',label:'æœé£Ÿ',...b[idx]},{type:'lunch',label:'æ˜¼é£Ÿ',...l[idx]},{type:'dinner',label:'å¤•é£Ÿ',...d[idx]}
  ]}));
  renderSummary(); renderPlan(); renderIngredients();
}

function renderSummary() {
  const bar=document.getElementById('summaryBar'); bar.classList.add('show');
  const totalCal=currentPlan.reduce((s,d)=>s+d.meals.reduce((ss,m)=>ss+m.cal,0),0);
  const avgCal=Math.round(totalCal/7), cc={jp:0,western:0,cn:0};
  currentPlan.forEach(d=>d.meals.forEach(m=>cc[m.cuisine]++));
  const allIng=new Set(); currentPlan.forEach(d=>d.meals.forEach(m=>m.ing.forEach(x=>allIng.add(x.n))));
  const bl={saving:'ç¯€ç´„',normal:'é€šå¸¸',rich:'ãƒªãƒƒãƒ'};
  bar.innerHTML=`
    <div class="stat-card animate-in" style="animation-delay:0s"><div class="stat-num">${avgCal}</div><div class="stat-label">1æ—¥å¹³å‡ kcal</div></div>
    <div class="stat-card animate-in" style="animation-delay:.05s"><div class="stat-num">${cc.jp}</div><div class="stat-label">å’Œé£Ÿ</div></div>
    <div class="stat-card animate-in" style="animation-delay:.1s"><div class="stat-num">${cc.western}</div><div class="stat-label">æ´‹é£Ÿ</div></div>
    <div class="stat-card animate-in" style="animation-delay:.15s"><div class="stat-num">${cc.cn}</div><div class="stat-label">ä¸­è¯</div></div>
    <div class="stat-card animate-in" style="animation-delay:.2s"><div class="stat-num">${allIng.size}</div><div class="stat-label">é£Ÿææ•°</div></div>
    <div class="stat-card animate-in" style="animation-delay:.25s"><div class="stat-num">${peopleCount}äºº</div><div class="stat-label">äººæ•°</div></div>`;
}

function renderPlan() {
  const c=document.getElementById('weekPlan');
  const calLabel=getCalMode()==='diet'?'ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ':'é€šå¸¸';
  const bl={saving:'ç¯€ç´„',normal:'é€šå¸¸',rich:'ãƒªãƒƒãƒ'};
  let html=`<div class="section-header animate-in"><div class="icon" style="background:var(--primary-light);color:var(--primary);">&#128197;</div><h2>ä¸€é€±é–“ã®çŒ®ç«‹</h2><span class="badge">${calLabel} / ${bl[getBudgetMode()]} / ${peopleCount}äººå‰</span></div>`;
  currentPlan.forEach((d,idx)=>{
    const tc=d.meals.reduce((s,m)=>s+m.cal,0);
    const cl={jp:'å’Œ',western:'æ´‹',cn:'ä¸­'};
    html+=`<div class="day-card animate-in" style="animation-delay:${idx*.04}s"><div class="day-header open" onclick="toggleDay(this)"><span class="day-dot" style="background:${d.color}"></span><span class="day-name">${d.day}</span><span class="day-cal-badge">${tc} kcal/äºº</span><span class="day-arrow">&#9660;</span></div><div class="day-body">${d.meals.map(m=>`<div class="meal-row"><span class="meal-badge ${m.type}">${m.label}</span><span class="cuisine-pill ${m.cuisine}">${cl[m.cuisine]}</span><span class="meal-name">${m.name}</span><span class="meal-cal">${m.cal} kcal</span></div>`).join('')}<div class="day-total">åˆè¨ˆ ${tc} kcal / äºº</div></div></div>`;
  });
  c.innerHTML=html;
}

function toggleDay(el){el.classList.toggle('open');el.nextElementSibling.classList.toggle('collapsed');}

// â”€â”€ Aggregate quantities â”€â”€
function aggregateIngredients() {
  const map = {};
  currentPlan.forEach(d => d.meals.forEach(m => m.ing.forEach(x => {
    const key = x.n + '|' + x.u;
    if (!map[key]) map[key] = { n: x.n, u: x.u, q: 0 };
    map[key].q += x.q * peopleCount;
  })));
  return Object.values(map).map(x => ({ ...x, q: Math.round(x.q * 10) / 10 }));
}

function fmtQty(q, u) {
  // Friendly formatting
  const v = q % 1 === 0 ? q : q.toFixed(1);
  return v + ' ' + u;
}

function renderIngredients() {
  const container = document.getElementById('ingredients');
  const agg = aggregateIngredients();
  const byName = {};
  agg.forEach(x => byName[x.n] = x);

  const categories = {
    'ğŸ¥© è‚‰é¡': ['é¶ã‚€ã­è‚‰','é¶ã‚‚ã‚‚è‚‰','é¶ã²ãè‚‰','è±šã²ãè‚‰','è±šã‚‚ã‚‚è‚‰','è±šãƒãƒ©è‚‰','è±šãƒ­ãƒ¼ã‚¹','è±šè‚©ãƒ­ãƒ¼ã‚¹','ç‰›ã‚‚ã‚‚è‚‰','ç‰›è‚©ãƒ­ãƒ¼ã‚¹','ç‰›ã™ã­è‚‰','åˆã„ã³ãè‚‰','ã•ã•ã¿','ãƒ™ãƒ¼ã‚³ãƒ³','ãƒãƒ ','ã‚¦ã‚¤ãƒ³ãƒŠãƒ¼'],
    'ğŸŸ é­šä»‹é¡': ['é®­','ã‚µãƒ¼ãƒ¢ãƒ³','ã‚¿ãƒ©','ã•ã°','ã•ã°ç¼¶','ã¶ã‚Š','ã‚¨ãƒ“','ã‚¤ã‚«','ã‚ã•ã‚Š','ãƒ›ã‚¿ãƒ†','ã—ã‚‰ã™','ã‹ã¤ãŠç¯€','å¹²ã—ã‚¨ãƒ“'],
    'ğŸ¥¬ é‡èœãƒ»æœç‰©': ['ç‰ã­ã','é•·ã­ã','ã«ã‚“ã˜ã‚“','å¤§æ ¹','ç™½èœ','ã‚­ãƒ£ãƒ™ãƒ„','ãƒ¬ã‚¿ã‚¹','ãƒ­ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¿ã‚¹','ãƒˆãƒãƒˆ','ãƒŸãƒ‹ãƒˆãƒãƒˆ','ãã‚…ã†ã‚Š','ãƒ”ãƒ¼ãƒãƒ³','ã‚ºãƒƒã‚­ãƒ¼ãƒ‹','ã»ã†ã‚Œã‚“è‰','å°æ¾èœ','ãƒãƒ³ã‚²ãƒ³èœ','ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼','æ˜¥èŠ','å¤§è‘‰','ãƒ‘ã‚¯ãƒãƒ¼','ãƒã‚¸ãƒ«','ã«ã‚‰','ã•ã¤ã¾ã„ã‚‚','ã˜ã‚ƒãŒã„ã‚‚','ã”ã¼ã†','ã‚Œã‚“ã“ã‚“','ãŸã‘ã®ã“','ã‚‚ã‚„ã—','ã«ã‚“ã«ã','ç”Ÿå§œ','ãƒãƒŠãƒŠ','ã‚¢ãƒœã‚«ãƒ‰','ãƒ¬ãƒ¢ãƒ³','ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«'],
    'ğŸ«˜ è±†è…ãƒ»å¤§è±†è£½å“': ['è±†è…','ç„¼ãè±†è…','ç´è±†','è±†ä¹³','ã“ã‚“ã«ã‚ƒã','ã—ã‚‰ãŸã'],
    'ğŸ„ ãã®ã“ãƒ»æµ·è—»': ['ã—ã‚ã˜','ãˆã®ã','ããã‚‰ã’','ã‚ã‹ã‚','ã®ã‚Š'],
    'ğŸ¥š åµãƒ»ä¹³è£½å“': ['åµ','ã†ãšã‚‰ã®åµ','ç‰›ä¹³','ç”Ÿã‚¯ãƒªãƒ¼ãƒ ','ãƒã‚¿ãƒ¼','ãƒãƒ¼ã‚º','ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º','ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ãƒãƒ¼ã‚º','ã‚®ãƒªã‚·ãƒ£ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ','ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ '],
    'ğŸš ç©€é¡ãƒ»éºº': ['ã”ã¯ã‚“','ç„ç±³','ã‚­ãƒŒã‚¢','ã†ã©ã‚“','ä¸­è¯éºº','ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£','é£Ÿãƒ‘ãƒ³','å…¨ç²’ç²‰ãƒ‘ãƒ³','ã‚¤ãƒ³ã‚°ãƒªãƒƒã‚·ãƒ¥ãƒãƒ•ã‚£ãƒ³','è’¸ã—ãƒ‘ãƒ³','æšã’ãƒ‘ãƒ³','è‚‰ã¾ã‚“','ã‚ªãƒ¼ãƒˆãƒŸãƒ¼ãƒ«','ã‚°ãƒ©ãƒãƒ¼ãƒ©','æ˜¥é›¨'],
    'ğŸ§‚ èª¿å‘³æ–™ãƒ»ä»–': ['é†¤æ²¹','å‘³å™Œ','ã¿ã‚Šã‚“','é…¢','å¡©','ç ‚ç³–','ãƒãƒ³é…¢','ã‚ã‚“ã¤ã‚†','ã”ã¾æ²¹','ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«','ã‚±ãƒãƒ£ãƒƒãƒ—','ãƒ‡ãƒŸã‚°ãƒ©ã‚¹ã‚½ãƒ¼ã‚¹','ã‚µãƒ«ã‚µã‚½ãƒ¼ã‚¹','ãƒ¡ãƒ¼ãƒ—ãƒ«ã‚·ãƒ­ãƒƒãƒ—','è±†æ¿é†¤','ç”œéººé†¤','ã‚ªã‚¤ã‚¹ã‚¿ãƒ¼ã‚½ãƒ¼ã‚¹','ãƒ©ãƒ¼æ²¹','ç·´ã‚Šã”ã¾','é¶ã‚¬ãƒ©ã‚¹ãƒ¼ãƒ—ã®ç´ ','ç™½ãƒ¯ã‚¤ãƒ³','èµ¤ãƒ¯ã‚¤ãƒ³','ã”ã¾','ã‚±ãƒƒãƒ‘ãƒ¼','ã‚ªãƒªãƒ¼ãƒ–','ã‚¶ãƒ¼ã‚µã‚¤','ãŸãã‚ã‚“','æ¢…å¹²ã—','ãƒŸãƒƒã‚¯ã‚¹ãƒ™ãƒªãƒ¼','ãƒ­ãƒ¼ã‚ºãƒãƒªãƒ¼','å…¨ç²’ç²‰ã‚¯ãƒ«ãƒˆãƒ³','å¤©ã·ã‚‰ç²‰','ãƒ‘ãƒ³ç²‰','å°éº¦ç²‰','ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­ãƒŸãƒƒã‚¯ã‚¹'],
  };

  const allNames = new Set(agg.map(x => x.n));

  let html = `
    <div class="section-header animate-in">
      <div class="icon" style="background:var(--success-light);color:var(--success);">&#128722;</div>
      <h2>è²·ã„ç‰©ãƒªã‚¹ãƒˆ</h2>
      <span class="badge">${allNames.size} å“ç›® / ${peopleCount}äººåˆ†</span>
    </div>
    <div class="ing-card animate-in">
      <div class="ing-summary">ã‚¯ãƒªãƒƒã‚¯ã§ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã«ã§ãã¾ã™ï¼ˆ${peopleCount}äºº &times; 7æ—¥åˆ†ï¼‰</div>`;

  for (const [cat, items] of Object.entries(categories)) {
    const matched = items.filter(n => allNames.has(n));
    if (!matched.length) continue;
    html += `<div class="ing-cat-title">${cat} <span class="cnt">${matched.length}</span></div>`;
    html += '<table class="ing-table">';
    matched.forEach(n => {
      const x = byName[n];
      if (!x) return;
      html += `<tr onclick="this.classList.toggle('checked')"><td><div class="td-name"><span class="check-icon"></span>${x.n}</div></td><td>${fmtQty(x.q, x.u)}</td><td>${getMemo(x.n, x.q, x.u)}</td></tr>`;
    });
    html += '</table>';
  }

  const categorized = new Set(Object.values(categories).flat());
  const uncategorized = [...allNames].filter(n => !categorized.has(n));
  if (uncategorized.length) {
    html += `<div class="ing-cat-title">ğŸ“¦ ãã®ä»– <span class="cnt">${uncategorized.length}</span></div><table class="ing-table">`;
    uncategorized.forEach(n => {
      const x = byName[n]; if(!x) return;
      html += `<tr onclick="this.classList.toggle('checked')"><td><div class="td-name"><span class="check-icon"></span>${x.n}</div></td><td>${fmtQty(x.q, x.u)}</td><td>${getMemo(x.n, x.q, x.u)}</td></tr>`;
    });
    html += '</table>';
  }

  html += '</div>';
  container.innerHTML = html;
}

// Buying guide memo
function getMemo(name, qty, unit) {
  if (unit === 'g') {
    if (['é¶ã‚€ã­è‚‰','é¶ã‚‚ã‚‚è‚‰','è±šã‚‚ã‚‚è‚‰','è±šãƒãƒ©è‚‰','è±šãƒ­ãƒ¼ã‚¹','è±šè‚©ãƒ­ãƒ¼ã‚¹','ç‰›ã‚‚ã‚‚è‚‰','ç‰›è‚©ãƒ­ãƒ¼ã‚¹','ç‰›ã™ã­è‚‰','åˆã„ã³ãè‚‰','ã•ã•ã¿','é¶ã²ãè‚‰','è±šã²ãè‚‰'].includes(name)) {
      const packs = Math.ceil(qty / 300);
      return `ç´„${packs}ãƒ‘ãƒƒã‚¯ (300gå…¥)`;
    }
    if (name === 'ãƒ™ãƒ¼ã‚³ãƒ³') return `ç´„${Math.ceil(qty/150)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'è±†è…' || name === 'ç„¼ãè±†è…') return `ç´„${Math.ceil(qty/300)}ä¸`;
    if (name === 'ã”ã¯ã‚“' || name === 'ç„ç±³') { const go = Math.ceil(qty / 330); return `ç´„${go}åˆ (ç‚Šé£¯å‰)`; }
    if (name === 'ã—ã‚‰ãŸã' || name === 'ã“ã‚“ã«ã‚ƒã') return `ç´„${Math.ceil(qty/200)}è¢‹`;
    if (name === 'ã‚‚ã‚„ã—') return `ç´„${Math.ceil(qty/200)}è¢‹`;
    if (name === 'ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­ãƒŸãƒƒã‚¯ã‚¹') return `ç´„${Math.ceil(qty/200)}è¢‹`;
    if (name === 'ãƒãƒ¼ã‚º') return `ç´„${Math.ceil(qty/100)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'ãƒ‘ãƒ«ãƒ¡ã‚¶ãƒ³ãƒãƒ¼ã‚º') return qty > 50 ? '1æœ¬' : 'å°‘é‡';
    if (name === 'ã‚®ãƒªã‚·ãƒ£ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ') return `${Math.ceil(qty/100)}å€‹`;
    if (name === 'ã‚°ãƒ©ãƒãƒ¼ãƒ©') return `ç´„${Math.ceil(qty/400)}è¢‹`;
    if (name === 'ã‚ªãƒ¼ãƒˆãƒŸãƒ¼ãƒ«') return `ç´„${Math.ceil(qty/300)}è¢‹`;
    if (name === 'ã—ã‚ã˜' || name === 'ãˆã®ã') return `${Math.ceil(qty/100)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'ããã‚‰ã’') return `${Math.ceil(qty/20)}è¢‹ (ä¹¾ç‡¥)`;
    if (name === 'ã‚ã‹ã‚') return `${Math.ceil(qty/30)}è¢‹ (ä¹¾ç‡¥)`;
    if (name === 'ãƒŸãƒƒã‚¯ã‚¹ãƒ™ãƒªãƒ¼') return `${Math.ceil(qty/150)}è¢‹ (å†·å‡)`;
    if (name === 'ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ') return `${Math.ceil(qty/100)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'æ˜¥é›¨') return `${Math.ceil(qty/80)}è¢‹`;
    if (name === 'ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£') return `ç´„${Math.ceil(qty/500)}è¢‹ (500g)`;
    if (name === 'ã‚­ãƒŒã‚¢') return `${Math.ceil(qty/100)}è¢‹`;
    if (name === 'ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ãƒãƒ¼ã‚º') return `${Math.ceil(qty/100)}å€‹`;
    if (['ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼'].includes(name)) return `${Math.ceil(qty/200)}æ ª`;
    if (name === 'ã‚­ãƒ£ãƒ™ãƒ„') return qty > 300 ? `${Math.ceil(qty/900)}ç‰` : `${Math.ceil(qty/450)}å€‹ (åŠç‰)`;
    if (name === 'ç™½èœ') return `ç´„1/${Math.max(1,Math.round(2000/qty))}ç‰`;
    if (name === 'ã»ã†ã‚Œã‚“è‰' || name === 'å°æ¾èœ') return `${Math.ceil(qty/200)}æŸ`;
    if (name === 'ãƒãƒ³ã‚²ãƒ³èœ') return `${Math.ceil(qty/100)}æ ª`;
    if (name === 'æ˜¥èŠ') return `${Math.ceil(qty/150)}æŸ`;
    if (name === 'ã«ã‚‰') return `${Math.ceil(qty/100)}æŸ`;
    if (name === 'ãŸã‘ã®ã“') return `${Math.ceil(qty/180)}ãƒ‘ãƒƒã‚¯ (æ°´ç…®)`;
    if (name === 'ã‚Œã‚“ã“ã‚“') return `${Math.ceil(qty/200)}ç¯€`;
    if (name === 'ã”ã¼ã†') return `${Math.ceil(qty/150)}æœ¬`;
    if (name === 'ã•ã¤ã¾ã„ã‚‚') return `${Math.ceil(qty/200)}æœ¬`;
    if (name === 'ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«') return `${Math.ceil(qty/400)}ç¼¶ (ç¼¶è©°)`;
    if (name === 'ã‚¶ãƒ¼ã‚µã‚¤') return `${Math.ceil(qty/70)}ç“¶`;
    if (name === 'ãŸãã‚ã‚“') return 'å°‘é‡ãƒ‘ãƒƒã‚¯';
  }
  if (unit === 'ml') {
    if (name === 'è±†ä¹³') return `${Math.ceil(qty/1000)}ãƒ‘ãƒƒã‚¯ (1L)`;
    if (name === 'ç‰›ä¹³') return `${Math.ceil(qty/1000)}ãƒ‘ãƒƒã‚¯ (1L)`;
    if (name === 'ç”Ÿã‚¯ãƒªãƒ¼ãƒ ') return `${Math.ceil(qty/200)}ãƒ‘ãƒƒã‚¯ (200ml)`;
    if (name === 'ã‚ã‚“ã¤ã‚†') return `${Math.ceil(qty/500)}æœ¬`;
    if (['é†¤æ²¹','ã¿ã‚Šã‚“','é…¢','ãƒãƒ³é…¢','ã”ã¾æ²¹','ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«','ã‚±ãƒãƒ£ãƒƒãƒ—','ç™½ãƒ¯ã‚¤ãƒ³','èµ¤ãƒ¯ã‚¤ãƒ³','ãƒ¡ãƒ¼ãƒ—ãƒ«ã‚·ãƒ­ãƒƒãƒ—','ãƒ©ãƒ¼æ²¹'].includes(name)) return 'å¸¸å‚™å“';
  }
  if (unit === 'å€‹') {
    if (name === 'åµ') return `${Math.ceil(qty/10)}ãƒ‘ãƒƒã‚¯ (10å€‹å…¥)`;
    if (name === 'ã†ãšã‚‰ã®åµ') return `${Math.ceil(qty/10)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'ç‰ã­ã') { const n=Math.ceil(qty); return `${n}å€‹`; }
    if (name === 'ã˜ã‚ƒãŒã„ã‚‚') return `${Math.ceil(qty)}å€‹`;
    if (name === 'ãƒŸãƒ‹ãƒˆãƒãƒˆ') return `${Math.ceil(qty/8)}ãƒ‘ãƒƒã‚¯`;
  }
  if (unit === 'æœ¬') {
    if (name === 'é•·ã­ã') return `${Math.ceil(qty)}æœ¬`;
    if (name === 'ã«ã‚“ã˜ã‚“') return `${Math.ceil(qty)}æœ¬`;
    if (name === 'ãã‚…ã†ã‚Š') return `${Math.ceil(qty)}æœ¬`;
    if (name === 'ã‚ºãƒƒã‚­ãƒ¼ãƒ‹') return `${Math.ceil(qty)}æœ¬`;
    if (name === 'ãƒãƒŠãƒŠ') return `${Math.ceil(qty)}æœ¬`;
    if (name === 'ã‚¦ã‚¤ãƒ³ãƒŠãƒ¼') return `${Math.ceil(qty/6)}è¢‹ (6æœ¬å…¥)`;
  }
  if (unit === 'åˆ‡ã‚Œ') return `${Math.ceil(qty)}åˆ‡ã‚Œ`;
  if (unit === 'å°¾') return `${Math.ceil(qty)}å°¾`;
  if (unit === 'ç¼¶') return `${Math.ceil(qty)}ç¼¶`;
  if (unit === 'ç‰') return `${Math.ceil(qty)}ç‰`;
  if (unit === 'ãƒ‘ãƒƒã‚¯') return `${Math.ceil(qty)}ãƒ‘ãƒƒã‚¯`;
  if (unit === 'æš') {
    if (name === 'é£Ÿãƒ‘ãƒ³') return `${Math.ceil(qty/6)}æ–¤ (6æšåˆ‡)`;
    if (name === 'å…¨ç²’ç²‰ãƒ‘ãƒ³') return `${Math.ceil(qty/6)}è¢‹`;
    if (name === 'ãƒ™ãƒ¼ã‚³ãƒ³') return `${Math.ceil(qty/5)}ãƒ‘ãƒƒã‚¯`;
    if (name === 'ãƒãƒ ') return `${Math.ceil(qty/4)}ãƒ‘ãƒƒã‚¯ (4æšå…¥)`;
    if (name === 'ã®ã‚Š') return `${Math.ceil(qty/10)}è¢‹ (10æšå…¥)`;
  }
  if (unit === 'ç‰‡') return `${Math.ceil(qty)}ç‰‡`;
  if (unit === 'ç²’') return `${Math.ceil(qty)}ç²’`;
  if (unit === 'æ') return `${Math.ceil(qty)}æ`;
  if (['g','ml'].includes(unit)) return '';
  return '';
}

// Init
document.getElementById('generateBtn').addEventListener('click', generate);
renderAllergyChips();
generate();
</script>
</body>
</html>
